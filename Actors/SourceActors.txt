/*
This file contains all the actors most main objects inherit from, typically 
common things like projectiles and explosionactors and such that all use the same
states code, this can help with reducing script size all around
*/


actor ProjectileBase
{
PROJECTILE
+SKYEXPLODE
+DONTBLAST
+MTHRUSPECIES
+BLOODSPLATTER
//damagetype "Buster"
Speed 40
Damage (3 + CallACS("DamageRate",8,360,50))
radius 5
height 5
scale 2.1
States
{
Spawn:
TNT1 A 0 
BUST T 1 
loop
Death:
BUST T 1 A_Spawnitemex("BustergunPuff1",0,0,0,0,0,0,0,SXF_TRANSFERTRANSLATION)
stop
}
}

actor FastProjectileBase : Fastprojectile
{
PROJECTILE
+SKYEXPLODE
+DONTBLAST
+MTHRUSPECIES
+BLOODSPLATTER
damagetype "Buster"
MissileHeight 8
Speed 40
Damage (3 + CallACS("DamageRate",8,360,50))
radius 5
height 5
scale 2.1
States
{
Spawn:
TNT1 A 0 
BUST T 1 
loop
Death:
BUST T 1 A_Spawnitemex("BustergunPuff1",0,0,0,0,0,0,0,SXF_TRANSFERTRANSLATION)
stop
}
}

actor ExplosionBase 
{
PROJECTILE
+NOINTERACTION
+NOCLIP
+DONTBLAST
+FORCEXYBILLBOARD
+BLOODSPLATTER
Speed 0
//
Damagetype "Explosion"
radius 8
height 8
scale 5.5
States
{
Spawn:
NAPC A 0 
NAPC D 0 A_Explode(20, 310, 1,0,36)
NAPC A 0 A_PlaySoundEx("weapon/napalm", "Weapon")
ASEX ABCDEF 2 
stop
}
}

actor HitscanBulletBase : FastprojectileBase
{
damagetype "Buster"
Damage (5 + CallACS("DamageRate",4,360,150))
speed 255
height 5
radius 5
scale 1
States
{
Spawn:
TNT1 A 0 
TNT1 A 0
TNT1 A 1 
goto spawn+2
Death:
TNT1 A 1 A_PlaySound("weapon/mirrordeflect")
TNT1 A 1 A_Spawnitemex("BustergunPuff1",0,0,0,0,0,0,0,SXF_TRANSFERTRANSLATION)
stop
}
}

actor FXActor_A
{
PROJECTILE
+NOINTERACTION
+NOCLIP
+CLIENTSIDEONLY
radius 8
height 8
Damage (0)
scale 3.0
Reactiontime 35
Renderstyle "Translucent"
Alpha 1.0
States
{
Spawn:
ICMS A 0
ICMS ABCD 2
stop
}
}

actor FXActor_B
{
PROJECTILE
+NOINTERACTION
+NOCLIP
+CLIENTSIDEONLY
radius 8
height 8
Damage (0)
scale 3.0
Reactiontime 35
Renderstyle "Add"
Alpha 1.0
States
{
Spawn:
ICMS A 0
ICMS ABCD 2
stop
}
}

actor WatcherBase 
//Watchers area type of actor that is invisible and handles tasks in the background.
{
+MISSILE
+RIPPER
+NOGRAVITY
+NOINTERACTION
+NOTARGETSWITCH
+NONETID
States
{
Spawn:
TNT1 A 1
Death:
DeathTake:
TNT1 A 0
stop
}
}

actor LinearBullet : fastProjectileBase
{
//these are used for guns that utilize generic rounds.
Speed 10
Damage (6 + CallACS("DamageRate",6,300,65))
radius 3
height 3
Reactiontime 14
scale 1.0
Var Int User_TrailCount;
Var Int User_TP; //TrailPosition
States
{
Spawn:
TNT1 A 0 
TNT1 AA 1 ACS_NamedExecuteAlways("PitchMatch",0)
//TNT1 A 0 A_Jump(256,"SpeedSet")
//Goto SpeedSet
//SpeedSet:
TNT1 A 0 A_ScaleVelocity(10)
Goto Spawn2
Spawn2:
//TNT1 A 0 A_SetUserVar("User_TP",3*User_TrailCount)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-3,0,(sin(pitch)*3),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-6,0,(sin(pitch)*6),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-9,0,(sin(pitch)*9),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-12,0,(sin(pitch)*12),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-15,0,(sin(pitch)*15),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-18,0,(sin(pitch)*18),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-21,0,(sin(pitch)*21),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-24,0,(sin(pitch)*24),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-27,0,(sin(pitch)*27),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-30,0,(sin(pitch)*30),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-33,0,(sin(pitch)*33),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-36,0,(sin(pitch)*36),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-39,0,(sin(pitch)*39),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-42,0,(sin(pitch)*42),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-45,0,(sin(pitch)*45),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SetUserVar("User_TrailCount",User_TrailCount+1)
//TNT1 A 0 A_Jumpif(User_TrailCount >= 20,1)
//loop
//TNT1 A 0 
TNT1 A 1 //A_SetUserVar("User_TrailCount",1)
TNT1 A 0 A_Countdown
Goto Spawn2
Death:
TNT1 A 1 A_Spawnitemex("LinearBulletPuff",0,0,0,0,0,0,0,SXF_TRANSFERTRANSLATION)
stop
}
}

actor LinearBullet2 : fastProjectileBase
{
//these are used for guns that utilize generic rounds.
Speed 100
Damage (6 + CallACS("DamageRate",6,300,65))
radius 3
height 3
Reactiontime 12
scale 1.0
Var Int User_TrailCount;
Var Int User_TP; //TrailPosition
States
{
Spawn:
TNT1 A 0 
TNT1 A 0 ACS_NamedExecuteAlways("PitchMatch",0)
//TNT1 A 0 A_Jump(256,"SpeedSet")
//Goto SpeedSet
//SpeedSet:
//TNT1 A 0 A_ScaleVelocity(16)

Goto Spawn2
Spawn2:
//TNT1 A 0 A_SetUserVar("User_TP",3*User_TrailCount)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-3,0,(sin(pitch)*3),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-6,0,(sin(pitch)*6),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-9,0,(sin(pitch)*9),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-12,0,(sin(pitch)*12),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-15,0,(sin(pitch)*15),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-18,0,(sin(pitch)*18),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-21,0,(sin(pitch)*21),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-24,0,(sin(pitch)*24),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-27,0,(sin(pitch)*27),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-30,0,(sin(pitch)*30),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-33,0,(sin(pitch)*33),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-36,0,(sin(pitch)*36),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-39,0,(sin(pitch)*39),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-42,0,(sin(pitch)*42),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("LinearBulletTrail",cos(pitch)*-45,0,(sin(pitch)*45),MomX,MomY,MomZ,0,SXF_TRANSFERPITCH|SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
//TNT1 A 0 A_SetUserVar("User_TrailCount",User_TrailCount+1)
//TNT1 A 0 A_Jumpif(User_TrailCount >= 20,1)
//loop
//TNT1 A 0 
TNT1 A 1 //A_SetUserVar("User_TrailCount",1)
TNT1 A 0 A_Countdown
Goto Spawn2
Death:
TNT1 A 1 A_Spawnitemex("LinearBulletPuff",0,0,0,0,0,0,0,SXF_TRANSFERTRANSLATION)
stop
}
}

actor LinearBulletTrail : FXActor_B
{
MissileHeight 8
scale 1.0
States
{
Spawn:
BASB U 2
stop
}
}

actor LinearBulletPuff : FXActor_A
{
scale 0.4
States
{
Spawn:
BIM1 AABCDEF 1
stop
}
}

actor BarrierPartBase
{
  Radius 14
  Height 12
  Scale 0.5
  RenderStyle None
  Alpha 0.25
  //Bloodtype "ShieldHit"
  //Species "BLUEMember"
  DamageFactor "Explosion", 0.1
  DamageFactor "Voltspear", 3.0
  Health 900
  Painchance 256
  //Designatedteam 0
  +MISSILE
  +SHOOTABLE
  +NOTARGETSWITCH
  +NOGRAVITY
  +NOTELEPORT
  +NOTARGETSWITCH
  +THRUSPECIES
  +DONTRIP
  +DONTSPLASH
  +FLOORCLIP
  //+REFLECTIVE
  +DONTREFLECT
  +NODAMAGETHRUST
  //+DONTTHRUST 
  +DONTBLAST
  +GHOST	//Give projectiles that you wish to pass through the shield THRUGHOST flag
  States
  {
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx ("ScreenPartVisual", 0, 0, 16, 0, 0, 0, 0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
    HEXA A 2 
    stop
	Pain:
	TNT1 A 0  A_PlaySoundEX ("item/protoreflect","Soundslot5")
	stop
  Death:
    TNT1 A 2
    stop
  }
}

actor ShieldHit
{
  Radius 1
  Height 1
  Scale 0.5
  Renderstyle Add
  +NOGRAVITY
  +NOINTERACTION
  States
  {
  Spawn:
    MMFX A 0 bright
    MMFX A 1 bright A_Stop
    MMFX A 0 bright A_PlaySound ("weapon/MirrorDeflect")
    MMFX A 1 bright
    stop
  }
}

actor ScreenPartVisual
{
  Radius 8
  Height 8
  Scale 0.5
  RenderStyle Add	//Fuzzy looks great in software mode
  Alpha 0.35
  +NOINTERACTION
  //+CLIENTSIDEONLY
  +FLOORCLIP
  States
  {
  Spawn:
  TNT1 A 0
    HEXA AAAA 1 bright 
    //HEXA AA 1 bright A_Fadeout(0.4)
    stop
  Death:
    TNT1 A 2
    stop
  }
}



actor BasicClientSide
{
+CLIENTSIDEONLY
+NOINTERACTION
+NOGRAVITY
-SOLID
radius 2
height 2
scale 2.5
}
